<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>libmoost: moost::thread::async_batch_processor Class Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>


</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">libmoost
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('classmoost_1_1thread_1_1async__batch__processor.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-static-methods">Static Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a>  </div>
  <div class="headertitle">
<div class="title">moost::thread::async_batch_processor Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<!-- doxytag: class="moost::thread::async_batch_processor" -->
<p>Allow a batch of jobs to be processed asyncronously whilst you wait.  
 <a href="classmoost_1_1thread_1_1async__batch__processor.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="async__batch__processor_8hpp_source.html">async_batch_processor.hpp</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for moost::thread::async_batch_processor:</div>
<div class="dyncontent">
<div class="center"><img src="classmoost_1_1thread_1_1async__batch__processor__coll__graph.png" border="0" usemap="#moost_1_1thread_1_1async__batch__processor_coll__map" alt="Collaboration graph"/></div>
<map name="moost_1_1thread_1_1async__batch__processor_coll__map" id="moost_1_1thread_1_1async__batch__processor_coll__map">
<area shape="rect" id="node2" href="classmoost_1_1thread_1_1worker__group.html" title="moost::thread::worker_group" alt="" coords="37,86,243,114"/><area shape="rect" id="node4" href="classboost_1_1noncopyable.html" title="noncopyable" alt="" coords="89,6,191,34"/></map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>

<p><a href="classmoost_1_1thread_1_1async__batch__processor-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmoost_1_1thread_1_1async__batch__processor_1_1batch__state.html">batch_state</a></td></tr>
<tr><td colspan="2"><h2><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef boost::function0&lt; void &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmoost_1_1thread_1_1async__batch__processor.html#a8cc5142997ebd443f5825a0c10db6fb9">job_t</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef std::vector&lt; <a class="el" href="classmoost_1_1thread_1_1async__batch__processor.html#a8cc5142997ebd443f5825a0c10db6fb9">job_t</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmoost_1_1thread_1_1async__batch__processor.html#a4fe0cfccbf011209f77e39e3d8f8c1cb">jobs_t</a></td></tr>
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmoost_1_1thread_1_1async__batch__processor.html#aa6d179b182e90f382f91d5593fda7b1f">async_batch_processor</a> (size_t num_threads)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct a new processor.  <a href="#aa6d179b182e90f382f91d5593fda7b1f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmoost_1_1thread_1_1async__batch__processor.html#a48611edc1c381a6565d68a5613bcead1">dispatch</a> (<a class="el" href="classmoost_1_1thread_1_1async__batch__processor.html#a4fe0cfccbf011209f77e39e3d8f8c1cb">jobs_t</a> &amp;jobs)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Dispatch worker threads to process jobs.  <a href="#a48611edc1c381a6565d68a5613bcead1"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pri-static-methods"></a>
Static Private Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmoost_1_1thread_1_1async__batch__processor.html#a20d73b142a1be57bc750c0a95c241c0f">handler</a> (<a class="el" href="classmoost_1_1thread_1_1async__batch__processor.html#a8cc5142997ebd443f5825a0c10db6fb9">job_t</a> &amp;job, boost::shared_ptr&lt; <a class="el" href="classmoost_1_1thread_1_1async__batch__processor_1_1batch__state.html">batch_state</a> &gt; state)</td></tr>
<tr><td colspan="2"><h2><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classmoost_1_1thread_1_1worker__group.html">worker_group</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmoost_1_1thread_1_1async__batch__processor.html#ab079cd0bf776efc762b637cd04378d0e">m_wg</a></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Allow a batch of jobs to be processed asyncronously whilst you wait. </p>
<p>There are times when you have a batch of data that needs to be processed and you want to process things asynchronously to maximise CPU usage.</p>
<p>The premise behind how it works is pretty simple; you create a collection of jobs where a job is a functor loaded with your data and logic to process the data. You then dispatch threads to process the jobs. The jobs will then be processed asyncronously but the dispatcher will block until all the jobs are processed.</p>
<p>It's like you are sending out a bunch of workers to dig a hole for you whilst you sit down and have a nice cup of tea :) </p>

<p>Definition at line <a class="el" href="async__batch__processor_8hpp_source.html#l00059">59</a> of file <a class="el" href="async__batch__processor_8hpp_source.html">async_batch_processor.hpp</a>.</p>
</div><hr/><h2>Member Typedef Documentation</h2>
<a class="anchor" id="a8cc5142997ebd443f5825a0c10db6fb9"></a><!-- doxytag: member="moost::thread::async_batch_processor::job_t" ref="a8cc5142997ebd443f5825a0c10db6fb9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef boost::function0&lt;void&gt; <a class="el" href="classmoost_1_1thread_1_1async__batch__processor.html#a8cc5142997ebd443f5825a0c10db6fb9">moost::thread::async_batch_processor::job_t</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="async__batch__processor_8hpp_source.html#l00098">98</a> of file <a class="el" href="async__batch__processor_8hpp_source.html">async_batch_processor.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a4fe0cfccbf011209f77e39e3d8f8c1cb"></a><!-- doxytag: member="moost::thread::async_batch_processor::jobs_t" ref="a4fe0cfccbf011209f77e39e3d8f8c1cb" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::vector&lt;<a class="el" href="classmoost_1_1thread_1_1async__batch__processor.html#a8cc5142997ebd443f5825a0c10db6fb9">job_t</a>&gt; <a class="el" href="classmoost_1_1thread_1_1async__batch__processor.html#a4fe0cfccbf011209f77e39e3d8f8c1cb">moost::thread::async_batch_processor::jobs_t</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="async__batch__processor_8hpp_source.html#l00099">99</a> of file <a class="el" href="async__batch__processor_8hpp_source.html">async_batch_processor.hpp</a>.</p>

</div>
</div>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="aa6d179b182e90f382f91d5593fda7b1f"></a><!-- doxytag: member="moost::thread::async_batch_processor::async_batch_processor" ref="aa6d179b182e90f382f91d5593fda7b1f" args="(size_t num_threads)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmoost_1_1thread_1_1async__batch__processor.html#aa6d179b182e90f382f91d5593fda7b1f">moost::thread::async_batch_processor::async_batch_processor</a> </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>num_threads</em></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Construct a new processor. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">threadcnt</td><td>the number of threads that will be used by the dispatcher </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="async__batch__processor_8hpp_source.html#l00107">107</a> of file <a class="el" href="async__batch__processor_8hpp_source.html">async_batch_processor.hpp</a>.</p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a48611edc1c381a6565d68a5613bcead1"></a><!-- doxytag: member="moost::thread::async_batch_processor::dispatch" ref="a48611edc1c381a6565d68a5613bcead1" args="(jobs_t &amp;jobs)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classmoost_1_1thread_1_1async__batch__processor.html#a48611edc1c381a6565d68a5613bcead1">moost::thread::async_batch_processor::dispatch</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmoost_1_1thread_1_1async__batch__processor.html#a4fe0cfccbf011209f77e39e3d8f8c1cb">jobs_t</a> &amp;&#160;</td>
          <td class="paramname"><em>jobs</em></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Dispatch worker threads to process jobs. </p>
<p>The dispatcher will dispatch threads to process your jobs and then wait until they are all done. Only then will it return to the caller.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">jobs</td><td>A collection of jobs to be processed </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="async__batch__processor_8hpp_source.html#l00121">121</a> of file <a class="el" href="async__batch__processor_8hpp_source.html">async_batch_processor.hpp</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classmoost_1_1thread_1_1async__batch__processor_a48611edc1c381a6565d68a5613bcead1_cgraph.png" border="0" usemap="#classmoost_1_1thread_1_1async__batch__processor_a48611edc1c381a6565d68a5613bcead1_cgraph" alt=""/></div>
<map name="classmoost_1_1thread_1_1async__batch__processor_a48611edc1c381a6565d68a5613bcead1_cgraph" id="classmoost_1_1thread_1_1async__batch__processor_a48611edc1c381a6565d68a5613bcead1_cgraph">
<area shape="rect" id="node3" href="classmoost_1_1thread_1_1worker__group.html#a44a4810bb89298f8b2e4c13e576476db" title="moost::thread::worker_group::add_job" alt="" coords="419,5,683,33"/><area shape="rect" id="node5" href="classmoost_1_1thread_1_1async__batch__processor.html#a20d73b142a1be57bc750c0a95c241c0f" title="moost::thread::async_batch_processor::handler" alt="" coords="388,55,713,83"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a20d73b142a1be57bc750c0a95c241c0f"></a><!-- doxytag: member="moost::thread::async_batch_processor::handler" ref="a20d73b142a1be57bc750c0a95c241c0f" args="(job_t &amp;job, boost::shared_ptr&lt; batch_state &gt; state)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void <a class="el" href="classmoost_1_1thread_1_1async__batch__processor.html#a20d73b142a1be57bc750c0a95c241c0f">moost::thread::async_batch_processor::handler</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmoost_1_1thread_1_1async__batch__processor.html#a8cc5142997ebd443f5825a0c10db6fb9">job_t</a> &amp;&#160;</td>
          <td class="paramname"><em>job</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">boost::shared_ptr&lt; <a class="el" href="classmoost_1_1thread_1_1async__batch__processor_1_1batch__state.html">batch_state</a> &gt;&#160;</td>
          <td class="paramname"><em>state</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [inline, static, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="async__batch__processor_8hpp_source.html#l00139">139</a> of file <a class="el" href="async__batch__processor_8hpp_source.html">async_batch_processor.hpp</a>.</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classmoost_1_1thread_1_1async__batch__processor_a20d73b142a1be57bc750c0a95c241c0f_icgraph.png" border="0" usemap="#classmoost_1_1thread_1_1async__batch__processor_a20d73b142a1be57bc750c0a95c241c0f_icgraph" alt=""/></div>
<map name="classmoost_1_1thread_1_1async__batch__processor_a20d73b142a1be57bc750c0a95c241c0f_icgraph" id="classmoost_1_1thread_1_1async__batch__processor_a20d73b142a1be57bc750c0a95c241c0f_icgraph">
<area shape="rect" id="node3" href="classmoost_1_1thread_1_1async__batch__processor.html#a48611edc1c381a6565d68a5613bcead1" title="Dispatch worker threads to process jobs." alt="" coords="381,5,715,33"/></map>
</div>
</p>

</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="ab079cd0bf776efc762b637cd04378d0e"></a><!-- doxytag: member="moost::thread::async_batch_processor::m_wg" ref="ab079cd0bf776efc762b637cd04378d0e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmoost_1_1thread_1_1worker__group.html">worker_group</a> <a class="el" href="classmoost_1_1thread_1_1async__batch__processor.html#ab079cd0bf776efc762b637cd04378d0e">moost::thread::async_batch_processor::m_wg</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="async__batch__processor_8hpp_source.html#l00148">148</a> of file <a class="el" href="async__batch__processor_8hpp_source.html">async_batch_processor.hpp</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>/home/mhx/git/github/libmoost/include/moost/thread/<a class="el" href="async__batch__processor_8hpp_source.html">async_batch_processor.hpp</a></li>
</ul>
</div><!-- contents -->
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="namespacemoost.html">moost</a>      </li>
      <li class="navelem"><a class="el" href="namespacemoost_1_1thread.html">thread</a>      </li>
      <li class="navelem"><a class="el" href="classmoost_1_1thread_1_1async__batch__processor.html">async_batch_processor</a>      </li>

    <li class="footer">Generated on Wed Feb 20 2013 05:56:10 for libmoost by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.6.1 </li>
   </ul>
 </div>


</body>
</html>
