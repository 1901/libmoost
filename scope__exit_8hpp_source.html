<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>libmoost: /home/mhx/git/github/libmoost/include/moost/utils/scope_exit.hpp Source File</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>


</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">libmoost
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('scope__exit_8hpp.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">/home/mhx/git/github/libmoost/include/moost/utils/scope_exit.hpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="scope__exit_8hpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/* vim:set ts=3 sw=3 sts=3 et: */</span>
<a name="l00039"></a>00039 <span class="preprocessor">#ifndef MOOST_UTILS_SCOPE_EXIT_HPP__</span>
<a name="l00040"></a>00040 <span class="preprocessor"></span><span class="preprocessor">#define MOOST_UTILS_SCOPE_EXIT_HPP__</span>
<a name="l00041"></a>00041 <span class="preprocessor"></span>
<a name="l00042"></a>00042 <span class="preprocessor">#include &lt;boost/noncopyable.hpp&gt;</span>
<a name="l00043"></a>00043 <span class="preprocessor">#include &lt;boost/function.hpp&gt;</span>
<a name="l00044"></a>00044 <span class="preprocessor">#include &lt;boost/ref.hpp&gt;</span>
<a name="l00045"></a>00045 
<a name="l00046"></a>00046 <span class="keyword">namespace </span>moost { <span class="keyword">namespace </span>utils {
<a name="l00047"></a>00047 
<a name="l00048"></a>00048    <span class="comment">// These are the default policies, use on or create your own.</span>
<a name="l00049"></a>00049 
<a name="l00050"></a><a class="code" href="namespacemoost_1_1utils_1_1scope__exit.html">00050</a>    <span class="keyword">namespace </span>scope_exit
<a name="l00051"></a>00051    {
<a name="l00052"></a><a class="code" href="namespacemoost_1_1utils_1_1scope__exit_1_1policy.html">00052</a>       <span class="keyword">namespace </span>policy
<a name="l00053"></a>00053       {
<a name="l00054"></a>00054          <span class="comment">// =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=</span>
<a name="l00056"></a>00056 <span class="comment"></span>         <span class="keyword">template</span> &lt;<span class="keyword">typename</span> scopedT&gt;
<a name="l00057"></a><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1policy__base.html">00057</a>          <span class="keyword">struct </span><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1policy__base.html" title="The base for all policies. Models common concept interface.">policy_base</a> : <span class="keyword">private</span> boost::<a class="code" href="classboost_1_1noncopyable.html">noncopyable</a>
<a name="l00058"></a>00058          {
<a name="l00059"></a><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1policy__base.html#a026292444a34a3347f68ca6c379fa9a7">00059</a>             <span class="keyword">typedef</span> scopedT <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1policy__base.html#a026292444a34a3347f68ca6c379fa9a7">scoped_type</a>;
<a name="l00060"></a>00060 
<a name="l00061"></a><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1policy__base.html#a8422c06bb1e9d2a242e36a838d34b34f">00061</a>             <span class="keyword">explicit</span> <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1policy__base.html#a8422c06bb1e9d2a242e36a838d34b34f">policy_base</a>(<a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1policy__base.html#a026292444a34a3347f68ca6c379fa9a7">scoped_type</a> <span class="keyword">const</span> &amp; scoped)
<a name="l00062"></a>00062                : <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1policy__base.html#afcb89a3c93cf36aca769a07a06aa4b39">scoped_</a>(scoped) { }
<a name="l00063"></a>00063 
<a name="l00064"></a>00064          <span class="keyword">protected</span>:
<a name="l00065"></a><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1policy__base.html#afcb89a3c93cf36aca769a07a06aa4b39">00065</a>             <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1policy__base.html#a026292444a34a3347f68ca6c379fa9a7">scoped_type</a> <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1policy__base.html#afcb89a3c93cf36aca769a07a06aa4b39">scoped_</a>;
<a name="l00066"></a>00066          };
<a name="l00067"></a>00067 
<a name="l00068"></a>00068          <span class="comment">// =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=</span>
<a name="l00070"></a>00070 <span class="comment"></span>         <span class="keyword">template</span> &lt;<span class="keyword">typename</span> scopedT&gt;
<a name="l00071"></a><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1policy__base__with__get.html">00071</a>          <span class="keyword">struct </span><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1policy__base__with__get.html" title="The base for all policies that implement a getter.">policy_base_with_get</a> : <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1policy__base.html" title="The base for all policies. Models common concept interface.">policy_base</a>&lt;scopedT&gt;
<a name="l00072"></a>00072          {
<a name="l00073"></a><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1policy__base__with__get.html#a6849c78a2023a255c6229304ddcbabcd">00073</a>             <span class="keyword">typedef</span> scopedT <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1policy__base__with__get.html#a6849c78a2023a255c6229304ddcbabcd">scoped_type</a>;
<a name="l00074"></a>00074 
<a name="l00075"></a><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1policy__base__with__get.html#ac316853fa7514bf5b212c0a10b2be774">00075</a>             <span class="keyword">explicit</span> <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1policy__base__with__get.html#ac316853fa7514bf5b212c0a10b2be774">policy_base_with_get</a>(<a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1policy__base.html#a026292444a34a3347f68ca6c379fa9a7">scoped_type</a> <span class="keyword">const</span> &amp; scoped)
<a name="l00076"></a>00076                : <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1policy__base.html" title="The base for all policies. Models common concept interface.">policy_base</a>&lt;scopedT&gt;(scoped) { }
<a name="l00077"></a>00077 
<a name="l00078"></a><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1policy__base__with__get.html#a99c40ba4a54c0903cbe88974a0e31d97">00078</a>             <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1policy__base.html#a026292444a34a3347f68ca6c379fa9a7">scoped_type</a> <span class="keyword">const</span> &amp; <span class="keyword">get</span>() <span class="keyword">const</span>
<a name="l00079"></a>00079             {
<a name="l00080"></a>00080                <span class="keywordflow">return</span> this-&gt;<a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1policy__base.html#afcb89a3c93cf36aca769a07a06aa4b39">scoped_</a>;
<a name="l00081"></a>00081             }
<a name="l00082"></a>00082          };
<a name="l00083"></a>00083 
<a name="l00084"></a>00084          <span class="comment">// =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=</span>
<a name="l00086"></a>00086 <span class="comment"></span>         <span class="keyword">template</span> &lt;<span class="keyword">typename</span> scopedT&gt;
<a name="l00087"></a><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1set__default__value.html">00087</a>          <span class="keyword">struct </span><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1set__default__value.html" title="This policy just sets scoped to the default constructed value.">set_default_value</a> : <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1policy__base.html" title="The base for all policies. Models common concept interface.">policy_base</a>&lt;boost::reference_wrapper&lt;scopedT&gt; &gt;
<a name="l00088"></a>00088          {
<a name="l00089"></a><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1set__default__value.html#a00886456c599e9d0f6e1b75ae514ccf0">00089</a>             <span class="keyword">typedef</span> scopedT <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1set__default__value.html#a00886456c599e9d0f6e1b75ae514ccf0">scoped_type</a>;
<a name="l00090"></a><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1set__default__value.html#a52111d7e7edbf9c6b68f4d6cba5f0313">00090</a>             <span class="keyword">typedef</span> boost::reference_wrapper&lt;scopedT&gt; <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1set__default__value.html#a52111d7e7edbf9c6b68f4d6cba5f0313">policy_type</a>;
<a name="l00091"></a>00091 
<a name="l00092"></a><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1set__default__value.html#ae7ee0893e57212f27236be69a5d2ba89">00092</a>             <span class="keyword">explicit</span> <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1set__default__value.html#ae7ee0893e57212f27236be69a5d2ba89">set_default_value</a>(<a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1set__default__value.html#a00886456c599e9d0f6e1b75ae514ccf0">scoped_type</a> &amp; scoped) :
<a name="l00093"></a>00093                <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1policy__base.html" title="The base for all policies. Models common concept interface.">policy_base</a>&lt;<a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1set__default__value.html#a52111d7e7edbf9c6b68f4d6cba5f0313">policy_type</a>&gt;(<a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1set__default__value.html#a52111d7e7edbf9c6b68f4d6cba5f0313">policy_type</a>(scoped)) { }
<a name="l00094"></a>00094 
<a name="l00095"></a><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1set__default__value.html#ada355baca00cc2a35f97c7906a0664b4">00095</a>             <span class="keywordtype">void</span> <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1set__default__value.html#ada355baca00cc2a35f97c7906a0664b4">operator()</a>()<span class="keyword"> const</span>
<a name="l00096"></a>00096 <span class="keyword">            </span>{
<a name="l00097"></a>00097                <span class="comment">// Set back to default constructed value</span>
<a name="l00098"></a>00098                this-&gt;<a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1policy__base.html#afcb89a3c93cf36aca769a07a06aa4b39">scoped_</a>.get() = <span class="keyword">typename</span> <a class="code" href="namespacemoost_1_1mq_1_1error.html#afa15d2b77bc67b28ee46d11b2ffa3ee2">boost::remove_cv&lt;scoped_type&gt;::type</a>();
<a name="l00099"></a>00099             }
<a name="l00100"></a>00100          };
<a name="l00101"></a>00101 
<a name="l00102"></a>00102          <span class="comment">// =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=</span>
<a name="l00104"></a>00104 <span class="comment"></span>         <span class="keyword">template</span> &lt;<span class="keyword">typename</span> scopedT&gt;
<a name="l00105"></a><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1set__specific__value.html">00105</a>          <span class="keyword">struct </span><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1set__specific__value.html" title="This policy just sets scoped to a specific value.">set_specific_value</a> : <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1policy__base.html" title="The base for all policies. Models common concept interface.">policy_base</a>&lt;boost::reference_wrapper&lt;scopedT&gt; &gt;
<a name="l00106"></a>00106          {
<a name="l00107"></a><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1set__specific__value.html#aa33f7e8d8eb1043ecab28ab850b38ab2">00107</a>             <span class="keyword">typedef</span> scopedT <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1set__specific__value.html#aa33f7e8d8eb1043ecab28ab850b38ab2">scoped_type</a>;
<a name="l00108"></a><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1set__specific__value.html#aff132a73508470e58a5a18579c95c60b">00108</a>             <span class="keyword">typedef</span> boost::reference_wrapper&lt;scopedT&gt; <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1set__specific__value.html#aff132a73508470e58a5a18579c95c60b">policy_type</a>;
<a name="l00109"></a>00109 
<a name="l00110"></a><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1set__specific__value.html#a7525e3a953b14f670c80d126d2a82889">00110</a>             <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1set__specific__value.html#a7525e3a953b14f670c80d126d2a82889">set_specific_value</a>(<a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1set__specific__value.html#aa33f7e8d8eb1043ecab28ab850b38ab2">scoped_type</a> &amp; scoped, <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1set__specific__value.html#aa33f7e8d8eb1043ecab28ab850b38ab2">scoped_type</a> <span class="keyword">const</span> &amp; val) :
<a name="l00111"></a>00111                <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1policy__base.html" title="The base for all policies. Models common concept interface.">policy_base</a>&lt;<a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1set__specific__value.html#aff132a73508470e58a5a18579c95c60b">policy_type</a>&gt;(<a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1set__specific__value.html#aff132a73508470e58a5a18579c95c60b">policy_type</a>(scoped)), <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1set__specific__value.html#a63f4470866e5358e6622bebd4389da5a">val_</a>(val) { }
<a name="l00112"></a>00112 
<a name="l00113"></a><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1set__specific__value.html#a5b182353e939401652835c97204202af">00113</a>             <span class="keywordtype">void</span> <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1set__specific__value.html#a5b182353e939401652835c97204202af">operator()</a>()<span class="keyword"> const</span>
<a name="l00114"></a>00114 <span class="keyword">            </span>{
<a name="l00115"></a>00115                <span class="comment">// Set back to default constructed value</span>
<a name="l00116"></a>00116                this-&gt;<a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1policy__base.html#afcb89a3c93cf36aca769a07a06aa4b39">scoped_</a>.get() = <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1set__specific__value.html#a63f4470866e5358e6622bebd4389da5a">val_</a>;
<a name="l00117"></a>00117             }
<a name="l00118"></a>00118 
<a name="l00119"></a>00119          <span class="keyword">private</span>:
<a name="l00120"></a><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1set__specific__value.html#a63f4470866e5358e6622bebd4389da5a">00120</a>             scopedT <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1set__specific__value.html#a63f4470866e5358e6622bebd4389da5a">val_</a>;
<a name="l00121"></a>00121          };
<a name="l00122"></a>00122 
<a name="l00123"></a>00123          <span class="comment">// =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=</span>
<a name="l00125"></a>00125 <span class="comment"></span>         <span class="keyword">template</span> &lt;<span class="keyword">typename</span> scopedT&gt;
<a name="l00126"></a><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1restore__original__value.html">00126</a>          <span class="keyword">struct </span><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1restore__original__value.html" title="This policy just resets scoped back to the original value.">restore_original_value</a> : <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1policy__base.html" title="The base for all policies. Models common concept interface.">policy_base</a>&lt;boost::reference_wrapper&lt;scopedT&gt; &gt;
<a name="l00127"></a>00127          {
<a name="l00128"></a><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1restore__original__value.html#a338734b07dbeac4d71da337f92d56208">00128</a>             <span class="keyword">typedef</span> scopedT <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1restore__original__value.html#a338734b07dbeac4d71da337f92d56208">scoped_type</a>;
<a name="l00129"></a><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1restore__original__value.html#a0c01ebfc21ff945644c54acfbec8b4f2">00129</a>             <span class="keyword">typedef</span> boost::reference_wrapper&lt;scopedT&gt; <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1restore__original__value.html#a0c01ebfc21ff945644c54acfbec8b4f2">policy_type</a>;
<a name="l00130"></a>00130 
<a name="l00131"></a><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1restore__original__value.html#a4f305a79a00933bb00b4c99a4ed1a4fa">00131</a>             <span class="keyword">explicit</span> <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1restore__original__value.html#a4f305a79a00933bb00b4c99a4ed1a4fa">restore_original_value</a>(<a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1restore__original__value.html#a338734b07dbeac4d71da337f92d56208">scoped_type</a> &amp; scoped) :
<a name="l00132"></a>00132                <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1policy__base.html" title="The base for all policies. Models common concept interface.">policy_base</a>&lt;<a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1restore__original__value.html#a0c01ebfc21ff945644c54acfbec8b4f2">policy_type</a>&gt;(<a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1restore__original__value.html#a0c01ebfc21ff945644c54acfbec8b4f2">policy_type</a>(scoped)), <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1restore__original__value.html#a1f48dd24a460fa2971c979ff84956209">orig_scoped_</a>(scoped)
<a name="l00133"></a>00133             {
<a name="l00134"></a>00134                <span class="comment">// This policy takes a copy of the original scoped type to restore later</span>
<a name="l00135"></a>00135             }
<a name="l00136"></a>00136 
<a name="l00137"></a><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1restore__original__value.html#aea27914fb384e6f572c1ed496dab6f25">00137</a>             <span class="keywordtype">void</span> <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1restore__original__value.html#aea27914fb384e6f572c1ed496dab6f25">operator()</a>()<span class="keyword"> const</span>
<a name="l00138"></a>00138 <span class="keyword">            </span>{
<a name="l00139"></a>00139                <span class="comment">// Set back to original value</span>
<a name="l00140"></a>00140                this-&gt;<a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1policy__base.html#afcb89a3c93cf36aca769a07a06aa4b39">scoped_</a>.get() = <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1restore__original__value.html#a1f48dd24a460fa2971c979ff84956209">orig_scoped_</a>;
<a name="l00141"></a>00141             }
<a name="l00142"></a>00142 
<a name="l00143"></a>00143          <span class="keyword">private</span>:
<a name="l00144"></a><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1restore__original__value.html#a1f48dd24a460fa2971c979ff84956209">00144</a>             <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1restore__original__value.html#a338734b07dbeac4d71da337f92d56208">scoped_type</a> <span class="keyword">const</span> <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1restore__original__value.html#a1f48dd24a460fa2971c979ff84956209">orig_scoped_</a>;
<a name="l00145"></a>00145          };
<a name="l00146"></a>00146 
<a name="l00147"></a>00147          <span class="comment">// =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=</span>
<a name="l00150"></a>00150 <span class="comment"></span>         <span class="keyword">template</span> &lt;<span class="keyword">typename</span> scopedT&gt;
<a name="l00151"></a><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__member__function.html">00151</a>          <span class="keyword">struct </span><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__member__function.html">call_member_function</a> : <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1policy__base.html" title="The base for all policies. Models common concept interface.">policy_base</a>&lt;boost::reference_wrapper&lt;scopedT&gt; &gt;
<a name="l00152"></a>00152          {
<a name="l00153"></a><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__member__function.html#af7e00d6fad568e1170e45e267565bd2b">00153</a>             <span class="keyword">typedef</span> scopedT <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__member__function.html#af7e00d6fad568e1170e45e267565bd2b">scoped_type</a>;
<a name="l00154"></a><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__member__function.html#aa8d1b08d687f0bec7b680b92eff0b61c">00154</a>             <span class="keyword">typedef</span> boost::reference_wrapper&lt;scopedT&gt; <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__member__function.html#aa8d1b08d687f0bec7b680b92eff0b61c">policy_type</a>;
<a name="l00155"></a><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__member__function.html#a2f512a78742ff105386a69cd8ef8019d">00155</a>             <span class="keyword">typedef</span> void (<a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__member__function.html#af7e00d6fad568e1170e45e267565bd2b">scoped_type</a>::*<a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__member__function.html#a2f512a78742ff105386a69cd8ef8019d">member_func_t</a>)();
<a name="l00156"></a>00156 
<a name="l00157"></a><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__member__function.html#a9402449131184a614bdf2a65fa6ba710">00157</a>             <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__member__function.html#a9402449131184a614bdf2a65fa6ba710">call_member_function</a>(<a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__member__function.html#af7e00d6fad568e1170e45e267565bd2b">scoped_type</a> &amp; scoped, <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__member__function.html#a2f512a78742ff105386a69cd8ef8019d">member_func_t</a> mf)
<a name="l00158"></a>00158                : <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1policy__base.html" title="The base for all policies. Models common concept interface.">policy_base</a>&lt;<a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__member__function.html#aa8d1b08d687f0bec7b680b92eff0b61c">policy_type</a>&gt;(<a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__member__function.html#aa8d1b08d687f0bec7b680b92eff0b61c">policy_type</a>(scoped)), <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__member__function.html#a8f023001667465444ae5640b534660b4">mf_</a>(mf)
<a name="l00159"></a>00159             {
<a name="l00160"></a>00160             }
<a name="l00161"></a>00161 
<a name="l00162"></a><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__member__function.html#a72547b26fe7fbf6fb68c37ca55f20300">00162</a>             <span class="keyword">explicit</span> <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__member__function.html#a9402449131184a614bdf2a65fa6ba710">call_member_function</a>(<a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__member__function.html#af7e00d6fad568e1170e45e267565bd2b">scoped_type</a> &amp; scoped)
<a name="l00163"></a>00163                : <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1policy__base.html" title="The base for all policies. Models common concept interface.">policy_base</a>&lt;<a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__member__function.html#aa8d1b08d687f0bec7b680b92eff0b61c">policy_type</a>&gt;(<a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__member__function.html#aa8d1b08d687f0bec7b680b92eff0b61c">policy_type</a>(scoped)), <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__member__function.html#a8f023001667465444ae5640b534660b4">mf_</a>(&amp;<a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__member__function.html#af7e00d6fad568e1170e45e267565bd2b">scoped_type</a>::operator())
<a name="l00164"></a>00164             {
<a name="l00165"></a>00165             }
<a name="l00166"></a>00166 
<a name="l00167"></a><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__member__function.html#a6212087fae7ec70fc67183fc089f3969">00167</a>             <span class="keywordtype">void</span> <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__member__function.html#a6212087fae7ec70fc67183fc089f3969">operator()</a>()<span class="keyword"> const</span>
<a name="l00168"></a>00168 <span class="keyword">            </span>{
<a name="l00169"></a>00169                <span class="keywordflow">if</span> (<a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__member__function.html#a8f023001667465444ae5640b534660b4">mf_</a>)
<a name="l00170"></a>00170                {
<a name="l00171"></a>00171                   <span class="comment">// call member function on scoped object</span>
<a name="l00172"></a>00172                   (this-&gt;<a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1policy__base.html#afcb89a3c93cf36aca769a07a06aa4b39">scoped_</a>.get().*<a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__member__function.html#a8f023001667465444ae5640b534660b4">mf_</a>)();
<a name="l00173"></a>00173                }
<a name="l00174"></a>00174             }
<a name="l00175"></a>00175 
<a name="l00176"></a>00176          <span class="keyword">private</span>:
<a name="l00177"></a><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__member__function.html#a8f023001667465444ae5640b534660b4">00177</a>             <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__member__function.html#a2f512a78742ff105386a69cd8ef8019d">member_func_t</a> <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__member__function.html#a8f023001667465444ae5640b534660b4">mf_</a>;
<a name="l00178"></a>00178          };
<a name="l00179"></a>00179 
<a name="l00180"></a>00180          <span class="comment">// =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=</span>
<a name="l00182"></a>00182 <span class="comment"></span>         <span class="keyword">template</span> &lt;<span class="keyword">typename</span> scopedT&gt;
<a name="l00183"></a><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__member__function_3_01scoped_t_01_5_01_4.html">00183</a>          <span class="keyword">struct </span><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__member__function.html">call_member_function</a>&lt;scopedT *&gt; : <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1policy__base.html">policy_base&lt;scopedT *&gt;</a>
<a name="l00184"></a>00184          {
<a name="l00185"></a><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__member__function_3_01scoped_t_01_5_01_4.html#ac49faabe044221800394e93e3f82cb53">00185</a>             <span class="keyword">typedef</span> scopedT * <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__member__function_3_01scoped_t_01_5_01_4.html#ac49faabe044221800394e93e3f82cb53">scoped_type</a>;
<a name="l00186"></a><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__member__function_3_01scoped_t_01_5_01_4.html#a1b3972929e19f0809236197791c97567">00186</a>             <span class="keyword">typedef</span> scoped_type <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__member__function_3_01scoped_t_01_5_01_4.html#a1b3972929e19f0809236197791c97567">policy_type</a>;
<a name="l00187"></a><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__member__function_3_01scoped_t_01_5_01_4.html#aa8a60147de39eabb6f80cc1bb495255e">00187</a>             <span class="keyword">typedef</span> void (scopedT::*member_func_t)();
<a name="l00188"></a>00188 
<a name="l00189"></a><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__member__function_3_01scoped_t_01_5_01_4.html#ad992e61747730081665d2bb6180e8d18">00189</a>             <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__member__function.html">call_member_function</a>(scoped_type scoped, member_func_t mf)
<a name="l00190"></a>00190                : <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1policy__base.html" title="The base for all policies. Models common concept interface.">policy_base</a>&lt;policy_type&gt;(scoped), mf_(mf)
<a name="l00191"></a>00191             {
<a name="l00192"></a>00192             }
<a name="l00193"></a>00193 
<a name="l00194"></a><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__member__function_3_01scoped_t_01_5_01_4.html#a4afa19153f4587680bd64a6686894414">00194</a>             <span class="keyword">explicit</span> <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__member__function.html">call_member_function</a>(scoped_type scoped)
<a name="l00195"></a>00195                : <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1policy__base.html" title="The base for all policies. Models common concept interface.">policy_base</a>&lt;policy_type&gt;(scoped), mf_(&amp;scopedT::operator())
<a name="l00196"></a>00196             {
<a name="l00197"></a>00197             }
<a name="l00198"></a>00198 
<a name="l00199"></a><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__member__function_3_01scoped_t_01_5_01_4.html#a5742381646cfb963bf56848c8aaf68f3">00199</a>             <span class="keywordtype">void</span> operator()()<span class="keyword"> const</span>
<a name="l00200"></a>00200 <span class="keyword">            </span>{
<a name="l00201"></a>00201                <span class="keywordflow">if</span> (mf_)
<a name="l00202"></a>00202                {
<a name="l00203"></a>00203                   <span class="comment">// call member function on scoped object</span>
<a name="l00204"></a>00204                   (this-&gt;scoped_-&gt;*mf_)();
<a name="l00205"></a>00205                }
<a name="l00206"></a>00206             }
<a name="l00207"></a>00207 
<a name="l00208"></a>00208          <span class="keyword">private</span>:
<a name="l00209"></a><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__member__function_3_01scoped_t_01_5_01_4.html#aa18fb515550672d22433124791230911">00209</a>             member_func_t <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__member__function_3_01scoped_t_01_5_01_4.html#aa18fb515550672d22433124791230911">mf_</a>;
<a name="l00210"></a>00210          };
<a name="l00211"></a>00211          <span class="comment">// =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=</span>
<a name="l00213"></a>00213 <span class="comment"></span>         <span class="keyword">template</span> &lt;<span class="keyword">typename</span> scopedT&gt;
<a name="l00214"></a><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__free__function__with__val.html">00214</a>          <span class="keyword">struct </span><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__free__function__with__val.html" title="Calls a free function or functor, passing it scoped by *value*.">call_free_function_with_val</a> : <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1policy__base__with__get.html" title="The base for all policies that implement a getter.">policy_base_with_get</a>&lt;scopedT&gt;
<a name="l00215"></a>00215          {
<a name="l00216"></a><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__free__function__with__val.html#afb899b206f713b8b3a3500d9f3923ad0">00216</a>             <span class="keyword">typedef</span> scopedT <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__free__function__with__val.html#afb899b206f713b8b3a3500d9f3923ad0">scoped_type</a>;
<a name="l00217"></a><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__free__function__with__val.html#a94ff1e21684a5955eecb725836f809d5">00217</a>             <span class="keyword">typedef</span> scopedT <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__free__function__with__val.html#a94ff1e21684a5955eecb725836f809d5">policy_type</a>;
<a name="l00218"></a><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__free__function__with__val.html#a2e2976cdd6717fe077efef2f4bfb2cd8">00218</a>             <span class="keyword">typedef</span>  boost::function&lt;void(scoped_type const &amp;)&gt; <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__free__function__with__val.html#a2e2976cdd6717fe077efef2f4bfb2cd8">func_t</a>;
<a name="l00219"></a>00219 
<a name="l00220"></a><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__free__function__with__val.html#a23cfb7a922797bd8fb97ee4446fa3e07">00220</a>             <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__free__function__with__val.html#a23cfb7a922797bd8fb97ee4446fa3e07">call_free_function_with_val</a>(<a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1policy__base.html#a026292444a34a3347f68ca6c379fa9a7">scoped_type</a> <span class="keyword">const</span> &amp; scoped, <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__free__function__with__val.html#a2e2976cdd6717fe077efef2f4bfb2cd8">func_t</a> <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__free__function__with__val.html#adf22843c225e2a60f840da7097a0947a">f_</a>)
<a name="l00221"></a>00221                : <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1policy__base__with__get.html" title="The base for all policies that implement a getter.">policy_base_with_get</a>&lt;<a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__free__function__with__val.html#a94ff1e21684a5955eecb725836f809d5">policy_type</a>&gt;(scoped), f_(f_)
<a name="l00222"></a>00222             {
<a name="l00223"></a>00223             }
<a name="l00224"></a>00224 
<a name="l00225"></a><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__free__function__with__val.html#ae0d1da10aba848fcefd42d62826f9e1d">00225</a>             <span class="keywordtype">void</span> <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__free__function__with__val.html#ae0d1da10aba848fcefd42d62826f9e1d">operator()</a>()<span class="keyword"> const</span>
<a name="l00226"></a>00226 <span class="keyword">            </span>{
<a name="l00227"></a>00227                <span class="keywordflow">if</span> (<a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__free__function__with__val.html#adf22843c225e2a60f840da7097a0947a">f_</a>)
<a name="l00228"></a>00228                {
<a name="l00229"></a>00229                   <span class="comment">// call free function with scoped object</span>
<a name="l00230"></a>00230                   <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__free__function__with__val.html#adf22843c225e2a60f840da7097a0947a">f_</a>(this-&gt;<a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1policy__base.html#afcb89a3c93cf36aca769a07a06aa4b39">scoped_</a>);
<a name="l00231"></a>00231                }
<a name="l00232"></a>00232             }
<a name="l00233"></a>00233 
<a name="l00234"></a>00234          <span class="keyword">private</span>:
<a name="l00235"></a><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__free__function__with__val.html#adf22843c225e2a60f840da7097a0947a">00235</a>             <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__free__function__with__val.html#a2e2976cdd6717fe077efef2f4bfb2cd8">func_t</a> <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__free__function__with__val.html#adf22843c225e2a60f840da7097a0947a">f_</a>;
<a name="l00236"></a>00236          };
<a name="l00237"></a>00237 
<a name="l00238"></a>00238          <span class="comment">// =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=</span>
<a name="l00240"></a>00240 <span class="comment"></span>         <span class="keyword">template</span> &lt;<span class="keyword">typename</span> scopedT&gt;
<a name="l00241"></a><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__free__function__with__ref.html">00241</a>          <span class="keyword">struct </span><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__free__function__with__ref.html" title="Calls a free function or functor, passing it scoped by *reference*.">call_free_function_with_ref</a> : <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1policy__base__with__get.html" title="The base for all policies that implement a getter.">policy_base_with_get</a>&lt;boost::reference_wrapper&lt;scopedT&gt; &gt;
<a name="l00242"></a>00242          {
<a name="l00243"></a><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__free__function__with__ref.html#a52c14ff687678e548ab0ef868dde046d">00243</a>             <span class="keyword">typedef</span> scopedT <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__free__function__with__ref.html#a52c14ff687678e548ab0ef868dde046d">scoped_type</a>;
<a name="l00244"></a><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__free__function__with__ref.html#ad8e27e6184ffce521c30b0fd7caa0fd3">00244</a>             <span class="keyword">typedef</span> boost::reference_wrapper&lt;scopedT&gt; <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__free__function__with__ref.html#ad8e27e6184ffce521c30b0fd7caa0fd3">policy_type</a>;
<a name="l00245"></a><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__free__function__with__ref.html#a50539cd06f372e8bfe6d78a0ac451ed5">00245</a>             <span class="keyword">typedef</span> boost::function&lt;void(scoped_type &amp;)&gt; <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__free__function__with__ref.html#a50539cd06f372e8bfe6d78a0ac451ed5">func_t</a>;
<a name="l00246"></a>00246 
<a name="l00247"></a><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__free__function__with__ref.html#af9580c022f214ac9c5de0b8639ef581f">00247</a>             <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__free__function__with__ref.html#af9580c022f214ac9c5de0b8639ef581f">call_free_function_with_ref</a>(<a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__free__function__with__ref.html#a52c14ff687678e548ab0ef868dde046d">scoped_type</a> &amp; scoped, <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__free__function__with__ref.html#a50539cd06f372e8bfe6d78a0ac451ed5">func_t</a> <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__free__function__with__ref.html#ae94076b5bd83790808969561058fb7f9">f_</a>)
<a name="l00248"></a>00248                : <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1policy__base__with__get.html" title="The base for all policies that implement a getter.">policy_base_with_get</a>&lt;<a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__free__function__with__ref.html#ad8e27e6184ffce521c30b0fd7caa0fd3">policy_type</a>&gt;(<a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__free__function__with__ref.html#ad8e27e6184ffce521c30b0fd7caa0fd3">policy_type</a>(scoped)), f_(f_)
<a name="l00249"></a>00249             {
<a name="l00250"></a>00250             }
<a name="l00251"></a>00251 
<a name="l00252"></a><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__free__function__with__ref.html#a1223dde617cfd8c0c7ba49df0e967164">00252</a>             <span class="keywordtype">void</span> <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__free__function__with__ref.html#a1223dde617cfd8c0c7ba49df0e967164">operator()</a>()<span class="keyword"> const</span>
<a name="l00253"></a>00253 <span class="keyword">            </span>{
<a name="l00254"></a>00254                <span class="keywordflow">if</span> (<a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__free__function__with__ref.html#ae94076b5bd83790808969561058fb7f9">f_</a>)
<a name="l00255"></a>00255                {
<a name="l00256"></a>00256                   <span class="comment">// call free function with scoped object</span>
<a name="l00257"></a>00257                   <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__free__function__with__ref.html#ae94076b5bd83790808969561058fb7f9">f_</a>(this-&gt;<a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1policy__base.html#afcb89a3c93cf36aca769a07a06aa4b39">scoped_</a>.get());
<a name="l00258"></a>00258                }
<a name="l00259"></a>00259             }
<a name="l00260"></a>00260 
<a name="l00261"></a>00261          <span class="keyword">private</span>:
<a name="l00262"></a><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__free__function__with__ref.html#ae94076b5bd83790808969561058fb7f9">00262</a>             <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__free__function__with__ref.html#a50539cd06f372e8bfe6d78a0ac451ed5">func_t</a> <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__free__function__with__ref.html#ae94076b5bd83790808969561058fb7f9">f_</a>;
<a name="l00263"></a>00263          };
<a name="l00264"></a>00264 
<a name="l00265"></a>00265          <span class="comment">// =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=</span>
<a name="l00267"></a>00267 <span class="comment"></span>         <span class="keyword">template</span> &lt;<span class="keyword">typename</span> scopedT&gt;
<a name="l00268"></a><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1free__malloc.html">00268</a>          <span class="keyword">struct </span><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1free__malloc.html" title="Calls free on pointer to release a malloc/realloc allocation.">free_malloc</a> : <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__free__function__with__val.html" title="Calls a free function or functor, passing it scoped by *value*.">call_free_function_with_val</a>&lt;scopedT *&gt;
<a name="l00269"></a>00269          {
<a name="l00270"></a><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1free__malloc.html#a3d5c0400981eb03e687a3438f6e1f875">00270</a>             <span class="keyword">typedef</span> scopedT * <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1free__malloc.html#a3d5c0400981eb03e687a3438f6e1f875">scoped_type</a>;
<a name="l00271"></a><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1free__malloc.html#a86d3fa7b989488fdd5ca4f11fb3ff8f0">00271</a>             <span class="keyword">typedef</span> <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1free__malloc.html#a3d5c0400981eb03e687a3438f6e1f875">scoped_type</a> <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1free__malloc.html#a86d3fa7b989488fdd5ca4f11fb3ff8f0">policy_type</a>;
<a name="l00272"></a><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1free__malloc.html#a03766811968327e448a5fd8da5290434">00272</a>             <span class="keyword">typedef</span> <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__free__function__with__val.html">call_free_function_with_val&lt;scopedT *&gt;</a> <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1free__malloc.html#a03766811968327e448a5fd8da5290434">base_policy</a>;
<a name="l00273"></a>00273 
<a name="l00274"></a><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1free__malloc.html#a1b7cab97bdb6cc2cf35c6a3f36546a0f">00274</a>             <span class="keyword">explicit</span> <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1free__malloc.html#a1b7cab97bdb6cc2cf35c6a3f36546a0f">free_malloc</a>(<a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1free__malloc.html#a3d5c0400981eb03e687a3438f6e1f875">scoped_type</a> <span class="keyword">const</span> &amp; scoped)
<a name="l00275"></a>00275                : <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__free__function__with__val.html" title="Calls a free function or functor, passing it scoped by *value*.">call_free_function_with_val</a>&lt;<a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1free__malloc.html#a3d5c0400981eb03e687a3438f6e1f875">scoped_type</a>&gt;(scoped, ::free)
<a name="l00276"></a>00276             {
<a name="l00277"></a>00277                <span class="comment">// [6/4/2011 ricky] Yes, I&#39;m afraid you *will* have to cast the direct output from malloc</span>
<a name="l00278"></a>00278                <span class="comment">//                  to that of the scoped type. This is C++ not C so get over it. Besides,</span>
<a name="l00279"></a>00279                <span class="comment">//                  what are you playing at using malloc anyway in C++ You&#39;d better have a</span>
<a name="l00280"></a>00280                <span class="comment">//                  darn good reason or the code police will be on your case. Hope you know</span>
<a name="l00281"></a>00281                <span class="comment">//                  exactly what you&#39;re getting yourself into here - good luck :)</span>
<a name="l00282"></a>00282                <span class="comment">//</span>
<a name="l00283"></a>00283                <span class="comment">//                  PS. I did consider adding a void * constructor but that would have</span>
<a name="l00284"></a>00284                <span class="comment">//                      lead to a situation where you could declare a scoped pointer to</span>
<a name="l00285"></a>00285                <span class="comment">//                      one type and then initialise things with a pointer to another.</span>
<a name="l00286"></a>00286                <span class="comment">//                      This would have been a recipe for disaster do I didn&#39;t =/</span>
<a name="l00287"></a>00287             }
<a name="l00288"></a>00288          };
<a name="l00289"></a>00289 
<a name="l00290"></a>00290          <span class="comment">// =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=</span>
<a name="l00292"></a><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__functor.html">00292</a> <span class="comment"></span>         <span class="keyword">struct </span><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__functor.html" title="Calls a boost::function0&lt;void&gt; functor.">call_functor</a> : <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1policy__base.html" title="The base for all policies. Models common concept interface.">policy_base</a>&lt;boost::function0&lt;void&gt; &gt;
<a name="l00293"></a>00293          {
<a name="l00294"></a><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__functor.html#aecee763c9d479b426f9da81a7d78c80f">00294</a>             <span class="keyword">typedef</span> boost::function0&lt;void&gt; <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__functor.html#aecee763c9d479b426f9da81a7d78c80f">scoped_type</a>;
<a name="l00295"></a><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__functor.html#ad704c1cc56f030a0adb5de77256b579b">00295</a>             <span class="keyword">typedef</span> <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__functor.html#aecee763c9d479b426f9da81a7d78c80f">scoped_type</a> <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__functor.html#ad704c1cc56f030a0adb5de77256b579b">policy_type</a>;
<a name="l00296"></a>00296 
<a name="l00297"></a><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__functor.html#af644fbdabac8e29e8343bf1090744f3c">00297</a>             <span class="keyword">explicit</span> <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__functor.html#af644fbdabac8e29e8343bf1090744f3c">call_functor</a>(<a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__functor.html#aecee763c9d479b426f9da81a7d78c80f">scoped_type</a> <span class="keyword">const</span> &amp; scoped)
<a name="l00298"></a>00298                : <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1policy__base.html" title="The base for all policies. Models common concept interface.">policy_base</a>&lt;<a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__functor.html#ad704c1cc56f030a0adb5de77256b579b">policy_type</a>&gt;(<a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__functor.html#ad704c1cc56f030a0adb5de77256b579b">policy_type</a>(scoped))
<a name="l00299"></a>00299             {
<a name="l00300"></a>00300             }
<a name="l00301"></a>00301 
<a name="l00302"></a><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__functor.html#ae83a137552db1871cc65a634bad05495">00302</a>             <span class="keywordtype">void</span> <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1call__functor.html#ae83a137552db1871cc65a634bad05495">operator()</a>()<span class="keyword"> const</span>
<a name="l00303"></a>00303 <span class="keyword">            </span>{
<a name="l00304"></a>00304                <span class="keywordflow">if</span> (this-&gt;<a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1policy__base.html#afcb89a3c93cf36aca769a07a06aa4b39">scoped_</a>)
<a name="l00305"></a>00305                {
<a name="l00306"></a>00306                   this-&gt;<a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1policy_1_1policy__base.html#afcb89a3c93cf36aca769a07a06aa4b39">scoped_</a>();
<a name="l00307"></a>00307                }
<a name="l00308"></a>00308             }
<a name="l00309"></a>00309          };
<a name="l00310"></a>00310 
<a name="l00311"></a>00311          <span class="comment">// =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=</span>
<a name="l00312"></a>00312          <span class="comment">// *** OR CREATE YOUR OWN POLICY AS REQUIRED</span>
<a name="l00313"></a>00313          <span class="comment">// =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=</span>
<a name="l00314"></a>00314       }
<a name="l00315"></a>00315 
<a name="l00317"></a>00317 
<a name="l00318"></a>00318       <span class="keyword">template</span> &lt;
<a name="l00319"></a>00319          <span class="keyword">typename</span> policyT
<a name="l00320"></a>00320       &gt;
<a name="l00321"></a><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1basic__scope__exit.html">00321</a>       <span class="keyword">struct </span><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1basic__scope__exit.html" title="This is the basic scope exit class, used when supplying custom policies.">basic_scope_exit</a>
<a name="l00322"></a>00322       {
<a name="l00323"></a><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1basic__scope__exit.html#a44be410ed94bfff5f6db49753414036d">00323</a>          <span class="keyword">typedef</span> policyT <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1basic__scope__exit.html#a44be410ed94bfff5f6db49753414036d">policy_t</a>;
<a name="l00324"></a><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1basic__scope__exit.html#af876d2f36c6400e7ee1566c70aa703b6">00324</a>          <span class="keyword">typedef</span> <span class="keyword">typename</span> policy_t::policy_type <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1basic__scope__exit.html#af876d2f36c6400e7ee1566c70aa703b6">policy_type</a>;
<a name="l00325"></a><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1basic__scope__exit.html#aa71f2002c75121468c9ab371f016ef95">00325</a>          <span class="keyword">typedef</span> <span class="keyword">typename</span> policy_t::scoped_type <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1basic__scope__exit.html#aa71f2002c75121468c9ab371f016ef95">scoped_type</a>;
<a name="l00326"></a>00326 
<a name="l00327"></a>00327          <span class="keyword">template</span>&lt;<span class="keyword">typename</span> scoped_typeT&gt;
<a name="l00328"></a><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1basic__scope__exit.html#abf84d9e2ce44db7dc7423b2569a9c5fd">00328</a>          <span class="keyword">explicit</span> <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1basic__scope__exit.html#abf84d9e2ce44db7dc7423b2569a9c5fd">basic_scope_exit</a>(scoped_typeT &amp; scoped) :
<a name="l00329"></a>00329             <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1basic__scope__exit.html#ae1d1c0539ab6ce9b2b45d1e91a28a457">exit_policy_</a>(scoped), <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1basic__scope__exit.html#a68985b7b2660f230439595b93e6d3a4d">cancel_</a>(false)
<a name="l00330"></a>00330          {
<a name="l00331"></a>00331          }
<a name="l00332"></a>00332 
<a name="l00333"></a>00333          <span class="keyword">template</span>&lt;<span class="keyword">typename</span> scoped_typeT&gt;
<a name="l00334"></a><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1basic__scope__exit.html#a50a052d03779145de4916f79f37bd9a9">00334</a>          <span class="keyword">explicit</span> <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1basic__scope__exit.html#abf84d9e2ce44db7dc7423b2569a9c5fd">basic_scope_exit</a>(scoped_typeT <span class="keyword">const</span> &amp; scoped) :
<a name="l00335"></a>00335          <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1basic__scope__exit.html#ae1d1c0539ab6ce9b2b45d1e91a28a457">exit_policy_</a>(scoped), <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1basic__scope__exit.html#a68985b7b2660f230439595b93e6d3a4d">cancel_</a>(false)
<a name="l00336"></a>00336          {
<a name="l00337"></a>00337          }
<a name="l00338"></a>00338 
<a name="l00339"></a>00339          <span class="keyword">template</span>&lt;<span class="keyword">typename</span> scoped_typeT, <span class="keyword">typename</span> policy_dataT&gt;
<a name="l00340"></a><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1basic__scope__exit.html#aca2c60694210a9cab8b55c9a9470819e">00340</a>          <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1basic__scope__exit.html#abf84d9e2ce44db7dc7423b2569a9c5fd">basic_scope_exit</a>(scoped_typeT &amp; scoped, policy_dataT &amp; policy_data) :
<a name="l00341"></a>00341             <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1basic__scope__exit.html#ae1d1c0539ab6ce9b2b45d1e91a28a457">exit_policy_</a>(scoped, policy_data), <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1basic__scope__exit.html#a68985b7b2660f230439595b93e6d3a4d">cancel_</a>(false)
<a name="l00342"></a>00342          {
<a name="l00343"></a>00343          }
<a name="l00344"></a>00344 
<a name="l00345"></a>00345          <span class="keyword">template</span>&lt;<span class="keyword">typename</span> scoped_typeT, <span class="keyword">typename</span> policy_dataT&gt;
<a name="l00346"></a><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1basic__scope__exit.html#a6aee8ffb0dbfe2790a0c86487a49c3e6">00346</a>          <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1basic__scope__exit.html#abf84d9e2ce44db7dc7423b2569a9c5fd">basic_scope_exit</a>(scoped_typeT <span class="keyword">const</span> &amp; scoped, policy_dataT &amp; policy_data) :
<a name="l00347"></a>00347             <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1basic__scope__exit.html#ae1d1c0539ab6ce9b2b45d1e91a28a457">exit_policy_</a>(scoped, policy_data), <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1basic__scope__exit.html#a68985b7b2660f230439595b93e6d3a4d">cancel_</a>(false)
<a name="l00348"></a>00348          {
<a name="l00349"></a>00349          }
<a name="l00350"></a>00350 
<a name="l00351"></a>00351          <span class="keyword">template</span>&lt;<span class="keyword">typename</span> scoped_typeT, <span class="keyword">typename</span> policy_dataT&gt;
<a name="l00352"></a><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1basic__scope__exit.html#a5e90f8f3d1cc06869a42d4124af51a16">00352</a>          <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1basic__scope__exit.html#abf84d9e2ce44db7dc7423b2569a9c5fd">basic_scope_exit</a>(scoped_typeT &amp; scoped, policy_dataT <span class="keyword">const</span> &amp; policy_data) :
<a name="l00353"></a>00353          <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1basic__scope__exit.html#ae1d1c0539ab6ce9b2b45d1e91a28a457">exit_policy_</a>(scoped, policy_data), <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1basic__scope__exit.html#a68985b7b2660f230439595b93e6d3a4d">cancel_</a>(false)
<a name="l00354"></a>00354          {
<a name="l00355"></a>00355          }
<a name="l00356"></a>00356 
<a name="l00357"></a>00357          <span class="keyword">template</span>&lt;<span class="keyword">typename</span> scoped_typeT, <span class="keyword">typename</span> policy_dataT&gt;
<a name="l00358"></a><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1basic__scope__exit.html#a85212ce2bc53c581070224966844ff87">00358</a>          <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1basic__scope__exit.html#abf84d9e2ce44db7dc7423b2569a9c5fd">basic_scope_exit</a>(scoped_typeT <span class="keyword">const</span> &amp; scoped, policy_dataT <span class="keyword">const</span> &amp; policy_data) :
<a name="l00359"></a>00359          <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1basic__scope__exit.html#ae1d1c0539ab6ce9b2b45d1e91a28a457">exit_policy_</a>(scoped, policy_data), <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1basic__scope__exit.html#a68985b7b2660f230439595b93e6d3a4d">cancel_</a>(false)
<a name="l00360"></a>00360          {
<a name="l00361"></a>00361          }
<a name="l00362"></a>00362 
<a name="l00363"></a><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1basic__scope__exit.html#a7f088c3be93d65ab6469bef01cc2de6f">00363</a>          <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1basic__scope__exit.html" title="This is the basic scope exit class, used when supplying custom policies.">basic_scope_exit</a> &amp; <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1basic__scope__exit.html#a7f088c3be93d65ab6469bef01cc2de6f">operator = </a>(<a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1basic__scope__exit.html#a44be410ed94bfff5f6db49753414036d">policy_t</a> <span class="keyword">const</span> &amp; exit_policy)
<a name="l00364"></a>00364          {
<a name="l00365"></a>00365             <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1basic__scope__exit.html#ae1d1c0539ab6ce9b2b45d1e91a28a457">exit_policy_</a> = exit_policy;
<a name="l00366"></a>00366          }
<a name="l00367"></a>00367 
<a name="l00368"></a><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1basic__scope__exit.html#ac9772b77b12a4f0805071126b6c73490">00368</a>          <span class="keywordtype">void</span> <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1basic__scope__exit.html#ac9772b77b12a4f0805071126b6c73490">cancel</a>(<span class="keywordtype">bool</span> <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1basic__scope__exit.html#ac9772b77b12a4f0805071126b6c73490">cancel</a> = <span class="keyword">true</span>)
<a name="l00369"></a>00369          {
<a name="l00370"></a>00370             <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1basic__scope__exit.html#a68985b7b2660f230439595b93e6d3a4d">cancel_</a> = <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1basic__scope__exit.html#ac9772b77b12a4f0805071126b6c73490">cancel</a>;
<a name="l00371"></a>00371          }
<a name="l00372"></a>00372 
<a name="l00373"></a><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1basic__scope__exit.html#af204cef8eaaf0dd291fda707bc91aea3">00373</a>          <span class="keywordtype">bool</span> <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1basic__scope__exit.html#af204cef8eaaf0dd291fda707bc91aea3">is_cancelled</a>()<span class="keyword"> const</span>
<a name="l00374"></a>00374 <span class="keyword">         </span>{
<a name="l00375"></a>00375             <span class="keywordflow">return</span> <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1basic__scope__exit.html#a68985b7b2660f230439595b93e6d3a4d">cancel_</a>;
<a name="l00376"></a>00376          }
<a name="l00377"></a>00377 
<a name="l00378"></a><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1basic__scope__exit.html#abbb4050151066c2d4aaafbe0f4850aa4">00378</a>          <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1basic__scope__exit.html#a44be410ed94bfff5f6db49753414036d">policy_t</a> &amp; <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1basic__scope__exit.html#abbb4050151066c2d4aaafbe0f4850aa4">operator *</a>()
<a name="l00379"></a>00379          {
<a name="l00380"></a>00380             <span class="keywordflow">return</span> <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1basic__scope__exit.html#ae1d1c0539ab6ce9b2b45d1e91a28a457">exit_policy_</a>;
<a name="l00381"></a>00381          }
<a name="l00382"></a>00382 
<a name="l00383"></a><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1basic__scope__exit.html#a2191107b4b2ca98fdab938456595adc6">00383</a>          <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1basic__scope__exit.html#a44be410ed94bfff5f6db49753414036d">policy_t</a> <span class="keyword">const</span> &amp; <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1basic__scope__exit.html#abbb4050151066c2d4aaafbe0f4850aa4">operator *</a>()<span class="keyword"> const</span>
<a name="l00384"></a>00384 <span class="keyword">         </span>{
<a name="l00385"></a>00385             <span class="keywordflow">return</span> <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1basic__scope__exit.html#ae1d1c0539ab6ce9b2b45d1e91a28a457">exit_policy_</a>;
<a name="l00386"></a>00386          }
<a name="l00387"></a>00387 
<a name="l00388"></a><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1basic__scope__exit.html#a82af4b21f6b274643ac35c8bb6d3ef84">00388</a>          <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1basic__scope__exit.html#a44be410ed94bfff5f6db49753414036d">policy_t</a> * <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1basic__scope__exit.html#a82af4b21f6b274643ac35c8bb6d3ef84">operator -&gt;</a>()
<a name="l00389"></a>00389          {
<a name="l00390"></a>00390             <span class="keywordflow">return</span> &amp;<a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1basic__scope__exit.html#ae1d1c0539ab6ce9b2b45d1e91a28a457">exit_policy_</a>;
<a name="l00391"></a>00391          }
<a name="l00392"></a>00392 
<a name="l00393"></a><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1basic__scope__exit.html#ac55679ede249739cae00be232cbece60">00393</a>          <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1basic__scope__exit.html#a44be410ed94bfff5f6db49753414036d">policy_t</a> <span class="keyword">const</span> * <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1basic__scope__exit.html#a82af4b21f6b274643ac35c8bb6d3ef84">operator -&gt;</a>()<span class="keyword"> const</span>
<a name="l00394"></a>00394 <span class="keyword">         </span>{
<a name="l00395"></a>00395             <span class="keywordflow">return</span> &amp;<a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1basic__scope__exit.html#ae1d1c0539ab6ce9b2b45d1e91a28a457">exit_policy_</a>;
<a name="l00396"></a>00396          }
<a name="l00397"></a>00397 
<a name="l00398"></a><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1basic__scope__exit.html#ab10741cc6bbf613a999fe51d4ff3b2aa">00398</a>          <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1basic__scope__exit.html#ab10741cc6bbf613a999fe51d4ff3b2aa">~basic_scope_exit</a>()
<a name="l00399"></a>00399          {
<a name="l00400"></a>00400             <span class="keywordflow">try</span>
<a name="l00401"></a>00401             {
<a name="l00402"></a>00402                <span class="keywordflow">if</span>(!<a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1basic__scope__exit.html#a68985b7b2660f230439595b93e6d3a4d">cancel_</a>) <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1basic__scope__exit.html#ae1d1c0539ab6ce9b2b45d1e91a28a457">exit_policy_</a>();
<a name="l00403"></a>00403             }
<a name="l00404"></a>00404             <span class="keywordflow">catch</span>(...) {}
<a name="l00405"></a>00405          }
<a name="l00406"></a>00406 
<a name="l00407"></a>00407       <span class="keyword">private</span>:
<a name="l00408"></a><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1basic__scope__exit.html#ae1d1c0539ab6ce9b2b45d1e91a28a457">00408</a>          <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1basic__scope__exit.html#a44be410ed94bfff5f6db49753414036d">policy_t</a> <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1basic__scope__exit.html#ae1d1c0539ab6ce9b2b45d1e91a28a457">exit_policy_</a>;
<a name="l00409"></a><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1basic__scope__exit.html#a68985b7b2660f230439595b93e6d3a4d">00409</a>          <span class="keywordtype">bool</span> <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1basic__scope__exit.html#a68985b7b2660f230439595b93e6d3a4d">cancel_</a>;
<a name="l00410"></a>00410       };
<a name="l00411"></a>00411 
<a name="l00412"></a>00412 
<a name="l00414"></a><a class="code" href="namespacemoost_1_1utils_1_1scope__exit.html#a2748aa204065f34ba077e1a7a40af8f6">00414</a>       <span class="keyword">typedef</span> <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1basic__scope__exit.html" title="This is the basic scope exit class, used when supplying custom policies.">basic_scope_exit&lt;policy::call_functor&gt;</a> <a class="code" href="namespacemoost_1_1utils_1_1scope__exit.html#a2748aa204065f34ba077e1a7a40af8f6" title="when scoped exits call this boost::function0&lt;void&gt; functor">call_functor</a>;
<a name="l00415"></a>00415 
<a name="l00417"></a>00417       <span class="keyword">template</span> &lt;<span class="keyword">typename</span> scopedT&gt;
<a name="l00418"></a><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1type.html">00418</a>       <span class="keyword">struct </span><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1type.html" title="This is the general scope exit class, with the various policies ready for use.">type</a>
<a name="l00419"></a>00419       {
<a name="l00421"></a><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1type.html#a5f6645b9060492e8a2a376b175faeb50">00421</a>          <span class="keyword">typedef</span> <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1basic__scope__exit.html" title="This is the basic scope exit class, used when supplying custom policies.">basic_scope_exit&lt;policy::set_default_value&lt;scopedT&gt;</a> &gt; <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1type.html#a5f6645b9060492e8a2a376b175faeb50" title="when scoped exits set scoped member to a default constructed value">set_default_value</a>;
<a name="l00422"></a>00422 
<a name="l00424"></a><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1type.html#ae0212a3eced5a5e71cbfea9e7c0321b2">00424</a>          <span class="keyword">typedef</span> <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1basic__scope__exit.html" title="This is the basic scope exit class, used when supplying custom policies.">basic_scope_exit&lt;policy::set_specific_value&lt;scopedT&gt;</a> &gt; <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1type.html#ae0212a3eced5a5e71cbfea9e7c0321b2" title="when scoped exits set scoped member to a specific value">set_specific_value</a>;
<a name="l00425"></a>00425 
<a name="l00427"></a><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1type.html#a1124d08f01c5d377469702f88eb05cca">00427</a>          <span class="keyword">typedef</span> <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1basic__scope__exit.html" title="This is the basic scope exit class, used when supplying custom policies.">basic_scope_exit&lt;policy::restore_original_value&lt;scopedT&gt;</a> &gt; <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1type.html#a1124d08f01c5d377469702f88eb05cca" title="when scoped exits set scoped member to its original value">restore_original_value</a>;
<a name="l00428"></a>00428 
<a name="l00430"></a><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1type.html#abbda2ded1dc726029611fd42c554901d">00430</a>          <span class="keyword">typedef</span> <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1basic__scope__exit.html" title="This is the basic scope exit class, used when supplying custom policies.">basic_scope_exit&lt;policy::call_member_function&lt;scopedT&gt;</a> &gt; <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1type.html#abbda2ded1dc726029611fd42c554901d" title="when scoped exits call a member function and pass it scoped member">call_member_function</a>;
<a name="l00431"></a>00431 
<a name="l00433"></a><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1type.html#a745e11dae54d9be90244713b91aac8df">00433</a>          <span class="keyword">typedef</span> <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1basic__scope__exit.html" title="This is the basic scope exit class, used when supplying custom policies.">basic_scope_exit&lt;policy::call_free_function_with_val&lt;scopedT&gt;</a> &gt; <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1type.html#a745e11dae54d9be90244713b91aac8df" title="when scoped exits call a free function and pass it scoped member by value">call_free_function_with_val</a>;
<a name="l00434"></a>00434 
<a name="l00436"></a><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1type.html#ad67a8cd3d7c03bd503ff72174bb95e76">00436</a>          <span class="keyword">typedef</span> <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1basic__scope__exit.html" title="This is the basic scope exit class, used when supplying custom policies.">basic_scope_exit&lt;policy::call_free_function_with_ref&lt;scopedT&gt;</a> &gt; <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1type.html#ad67a8cd3d7c03bd503ff72174bb95e76" title="when scoped exits call a free function and pass it scoped member by reference">call_free_function_with_ref</a>;
<a name="l00437"></a>00437 
<a name="l00439"></a><a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1type.html#af18922f24707bccd31691ab878d4dcaf">00439</a>          <span class="keyword">typedef</span> <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1basic__scope__exit.html" title="This is the basic scope exit class, used when supplying custom policies.">basic_scope_exit&lt;policy::free_malloc&lt;scopedT&gt;</a> &gt; <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1type.html#af18922f24707bccd31691ab878d4dcaf" title="when scoped exits call free on the scoped member (which must be a pointer pointing to malloc/realloc&#39;...">free_malloc</a>;
<a name="l00440"></a>00440 
<a name="l00441"></a>00441          <span class="keyword">private</span>: <a class="code" href="structmoost_1_1utils_1_1scope__exit_1_1type.html#a933a6696f1c505e9bbd0a67f5dee2ebc">type</a>();
<a name="l00442"></a>00442       };
<a name="l00443"></a>00443    }
<a name="l00444"></a>00444 }}
<a name="l00445"></a>00445 
<a name="l00446"></a>00446 <span class="preprocessor">#endif // MOOST_UTILS_SCOPE_EXIT_HPP__</span>
</pre></div></div><!-- contents -->
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="scope__exit_8hpp.html">scope_exit.hpp</a>      </li>

    <li class="footer">Generated on Wed Feb 20 2013 05:56:08 for libmoost by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.6.1 </li>
   </ul>
 </div>


</body>
</html>
